---
import { IncrementingButton as IncrementingButtonReactComponent } from "~/components/IncrementingButton"
import { getTrpcAstro } from "~/client"
import type { ButtonName } from "@repo/backend-core"

interface Props {
  name: ButtonName
  class?: string
}

const { name, class: className } = Astro.props

const trpcAstro = getTrpcAstro()

const buttonResponse = await trpcAstro.getButton.query({ name })

const clickCount = buttonResponse?.clickCount
---

<div>
  <IncrementingButtonReactComponent
    client:load
    name={name}
    className={className ?? ""}
    clickCount={clickCount ?? 0}
  >
    <slot>This button lacks text!</slot>
  </IncrementingButtonReactComponent>
</div>
